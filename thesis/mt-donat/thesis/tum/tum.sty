% latex package for TUM documents
% 
% \author Emanuel Regnath (emanuel.regnath@tum.de)
% 
% Â© 2011-2017, TeX4TUM


\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{\PathToTumTemplate/tum/tum}[2017/03/30 TUM related macros]


%\providecommand{\PathToTumTemplate}{tum}


%% load packages
%% =======================================================
\RequirePackage{\PathToTumTemplate/tum/tum_info}


% ======================================================================
% Colors
% ======================================================================
\RequirePackage{\PathToTumTemplate/tum/tum_colors}

%% Default color definitions

% headings
\colorlet{col_chapter_num}{sec_gray}
\colorlet{col_chapter}{sec_blue_dark}
\colorlet{col_section}{sec_blue_dark}
\colorlet{col_subsection}{sec_blue_dark}
\colorlet{col_subsubsection}{black}
\colorlet{col_paragraph}{black}

% environments
\colorlet{col_link}{sec_blue_dark}
\colorlet{col_table}{sec_blue_dark}
\colorlet{col_figure}{sec_blue_dark}
\colorlet{col_itemize}{sec_blue_dark}

% listings
\colorlet{col_lst}{sec_blue_dark}
\colorlet{col_lst_keyword}{prim_blue}
\colorlet{col_lst_comment}{emph_green}
\colorlet{col_lst_string}{emph_orange}
\colorlet{col_lst_number}{sec_gray_dark}




% Sourcecode listings
% ----------------------------------------------------------------------
  \RequirePackage{listings}
  \def\postbreak{\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookrightarrow\space}}}

  \lstset{
      basicstyle=\normalsize\ttfamily\lst@ifdisplaystyle\linespread{0.85}\footnotesize\fi,
      tabsize=4,
      %gobble=auto,       % skip initial tabs %not supported yet
      numbers=left,       % switch numbers on: left
      numberstyle=\tiny\sffamily\color{col_lst_number},
      numbersep=1em,
      keepspaces=true,
      breaklines=true, 
      breakatwhitespace=true,
      postbreak=\postbreak,
      keywordstyle=\bfseries\color{col_lst_keyword},
      commentstyle=\color{col_lst_comment},
      stringstyle=\color{col_lst_string},
      captionpos = t,
      frame = tb,
      framextopmargin={\smallskipamount},
      framexbottommargin={\smallskipamount},
      framerule=1pt,
      rulecolor = \color{col_lst},
  }

  % Inline code listings
  \let\code\lstinline




%% Hyperref and PDF Settings
%% =======================================================

  % Save \title, \author, \date before \maketitle
  \PassOptionsToPackage{pagebackref=true,pdfpagelabels}{hyperref}
  \RequirePackage{hyperref}

  % Title
  \makeatletter
  \renewcommand{\title}[1]{%
    \gdef\@title{#1}%
    \gdef\thetitle{#1}
    \pdfstringdef{\@pdftitle}{\@title}%
    \hypersetup{pdftitle=\@pdftitle}%
  }

  % Author
  \renewcommand{\author}[1]{%
    \gdef\@author{#1}%
    \gdef\theauthor{#1}
    \pdfstringdef{\@pdfauthor}{\@author}%
    \hypersetup{pdfauthor=\@pdfauthor}%
  }

  % Date
  \global\let\thedate\@date
  \renewcommand{\date}[1]{%
    \gdef\@date{#1}%
    \gdef\thedate{#1}
  }
  \makeatother

\hypersetup{
  colorlinks=true,
  linkcolor=col_link,
  urlcolor=col_link,
  citecolor=col_link,
}







